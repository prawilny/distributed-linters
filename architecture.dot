// dot architecture.dot -Tsvg > architecture.svg

graph {
    Admin -- MachineManager[label="set LB config"];
    Admin -- ContainerRegistry[label="push container images"];
    ContainerRegistry -- Kubernetes [style="dashed"];

    Client -- ExtLoadBalancer [label="http request"];
    ExtLoadBalancer -- LoadBalancer [label="http request"];
    LoadBalancer -- Linter [label="lint"];

    Kubernetes -- Linter [style="dashed", label="manage"];
    Kubernetes -- etcd[label="store machine list"];
    etcd -- MachineManager [label="watch machine list"];
    MachineManager -- etcd[label="latest weights"];
    MachineManager -- Kubernetes[label="create deployments"];
    MachineManager -- LoadBalancer[label="set LB config"];
}