// dot architecture.dot -Tsvg > architecture.svg

digraph {
    Client -> ExtLoadBalancer [label="http request"];
    ExtLoadBalancer -> LoadBalancer [label="http request"];
    LoadBalancer -> Linter [label="lint"];

    MachineManager -> etcd[label="lastest config", dir="both"];
    etcd -> MachineSpawner [label="watch machine list"];
    MachineManager -> LoadBalancer[label="set LB config"];

    Kubernetes -> Linter [style="dashed", label="manage"];

    MachineSpawner -> MachineManager[label="append/delete machine"];
    MachineSpawner -> MachineManager[label="set LB config"];

    Admin -> MachineSpawner[label="set LB config"];

    Admin -> Kubernetes[label="manage deployments"];
    Kubernetes -> etcd[label="store machine list"];
}